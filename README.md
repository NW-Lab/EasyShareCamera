# EasyShareCamera

ミルククラウン撮影用の240fpsスローモーションカメラアプリ

## 概要

EasyShareCameraは、水滴が液面に落下して形成される「ミルククラウン」を、赤色LEDトリガーを使って自動的に240fpsのスローモーションで撮影するiOSアプリです。

## 特徴

- **自動トリガー撮影**: 赤色LEDを検知すると自動的に録画を開始
- **240fps高速撮影**: iPhone標準のスローモーション機能を使用
- **物理計算に基づいた設定**: 30cm落下の水滴に最適化されたタイミング
- **シンプルなUI**: ワンタップで撮影準備完了

## 技術仕様

| 項目 | 値 |
|---|---|
| 落下高さ | 30cm |
| 落下時間 | 約247ms |
| フレームレート | 240fps |
| 録画時間 | 4秒 |
| 総フレーム数 | 960フレーム |
| 検知方式 | 赤色LED光学検知 |

## 使い方

### 1. セットアップ

1. カメラを三脚に固定
2. ミルククラウンが発生する位置を画面中央に合わせる
3. 赤色LEDを撮影領域に配置（水滴検知センサーと連動）

### 2. 撮影

1. アプリを起動
2. 「撮影準備」ボタンをタップ
3. 水滴を落とす
4. 赤色LEDが点灯すると自動的に録画開始
5. 4秒後に自動停止し、写真ライブラリに保存

### 3. 結果確認

撮影した動画は自動的に写真アプリに保存されます。スローモーション再生で美しいミルククラウンの形成過程を観察できます。

## システム要件

- iOS 17.0以降
- 240fps撮影対応のiPhone（iPhone 8以降）
- カメラとフォトライブラリへのアクセス許可

## 推奨環境

- **撮影環境**: 暗めの室内（赤色LEDを明確に検知するため）
- **照明**: 赤色以外の光源を使用（白色LED推奨）
- **LEDの配置**: 画面中央に配置し、カメラから見えるようにする
- **カメラ固定**: 三脚必須（手持ち撮影は非推奨）

## 物理的な仕組み

### 落下時間の計算

30cmの高さから水滴が落下する時間は、自由落下の式で計算できます：

```
t = √(2h/g)
t = √(2 × 0.3 / 9.81)
t ≈ 0.247秒（247ms）
```

### タイミング制御

1. 水滴が30cm上の位置で検知される
2. 赤色LEDが点灯
3. iPhoneが赤色を検知（約10-20ms）
4. 録画開始
5. 約247ms後に水滴が液面に到達
6. ミルククラウンが形成される

240fpsで撮影することで、この一瞬の現象を約60フレームで捉えることができます。

## トラブルシューティング

### 赤色LEDが検知されない

- 撮影環境を暗くする
- LEDをより明るいものに変更
- LEDを画面中央に配置
- 他の赤い光源を取り除く

### 録画が開始されない

- カメラへのアクセス許可を確認
- アプリを再起動
- iPhoneを再起動

### ミルククラウンが映っていない

- カメラの位置を調整
- 落下高さを確認（30cmに設定）
- 水滴のサイズを調整

## 開発情報

### アーキテクチャ

- **CameraManager**: カメラセッションと240fps撮影を管理
- **RedLightDetector**: リアルタイムで赤色LEDを検知
- **ContentView**: シンプルなUI

### 主要な技術

- AVFoundation（カメラ制御）
- Core Image（画像処理）
- SwiftUI（UI）

## ライセンス

このプロジェクトはMITライセンスの下で公開されています。

## 作者

EasyShareCamera開発チーム

## 謝辞

このアプリは、物理現象の教育用撮影を目的として開発されました。ミルククラウンの美しい瞬間を多くの人に共有できることを願っています。
